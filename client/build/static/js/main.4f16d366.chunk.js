(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{170:function(e,t,n){},172:function(e,t,n){},216:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){"use strict";n.r(t);var r,a=n(2),c=n(0),i=n.n(c),s=n(20),o=n.n(s),u=(n(170),n(171),n(172),n(14)),l=n(5),d=n.n(l),b=n(11),j=n(8),f=n(41),p=n(23),h=n(18),O=n(19),v=n(60),m=n(31),x=n(26),_=n(25);function y(e){return null!==e&&void 0!==e}function g(e){return!y(e)||""===e}function k(e){return e.calendar().split(" at")[0]}function w(e){var t,n="".concat(e.city," ").concat(e.province," ").concat(e.postal_code);return"".concat(e.building_number," ").concat(null!==(t=e.street_number)&&void 0!==t?t:e.street,"\n").concat(n)}function C(e){return e.split(" ").map((function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))})).join(" ")}function N(e){return new Promise((function(t,n){setTimeout((function(){return t()}),e)}))}!function(e){e.POSITIVE="POSITIVE",e.NEGATIVE="NEGATIVE",e.INFECTED="INFECTED",e.UNKNOWN="UNKNOWN"}(r||(r={}));var S=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"toPersonRequest",value:function(t){return e.copyAndFilterPerson(t,e.KEYS_TO_EXCLUDE)}},{key:"toUpdatePersonRequest",value:function(t){var n=Object(p.a)({},t);return e.deleteKeysToExclude(e.KEYS_TO_EXCLUDE,n),e.setNullableFields(e.UPDATE_NULLABLE_KEYS,n),n}},{key:"toPerson",value:function(t){var n={person_status:e.toCovidStatus(t.person_status)};return Object(p.a)(Object(p.a)({},t),n)}},{key:"toCovidStatus",value:function(e){if(!y(e))return r.NEGATIVE;switch(e){case"R":return r.POSITIVE;case"Y":return r.INFECTED;default:return r.NEGATIVE}}},{key:"copyAndFilterPerson",value:function(t,n){var r=Object(p.a)({},t);return e.deleteEmptyFieldsAndKeys(r),e.deleteKeysToExclude(n,r),r}},{key:"deleteKeysToExclude",value:function(e,t){Object.keys(t).forEach((function(n){e.has(n)&&delete t[n]}))}},{key:"setNullableFields",value:function(e,t){Object.keys(t).forEach((function(n){e.has(n)&&g(t[n])&&(t[n]=null)}))}},{key:"deleteEmptyFieldsAndKeys",value:function(e){Object.keys(e).forEach((function(t){g(e[t])&&delete e[t]}))}},{key:"toCreateFacultyRequest",value:function(e){return{faculty_id:e.faculty_id,job_title:e.job_title}}},{key:"toUpdateFacultyRequest",value:function(e){return{job_title:e.job_title}}}]),e}();S.KEYS_TO_EXCLUDE=new Set(["job_title","person_status"]),S.UPDATE_NULLABLE_KEYS=new Set(["email","phone_number","student_id","faculty_id"]);var T=n(90),I=n.n(T),B=n(68),E=n.n(B);function P(e){return{data:e}}function A(e){return E()(e).tz(R)}function D(e){return A(e).toISOString()}var R=E.a.tz.guess(),L=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,[{key:"post",value:function(t,n){return I.a.post(t,P(n),e.JSON_HEADER)}},{key:"patch",value:function(t,n){return I.a.patch(t,P(n),e.JSON_HEADER)}},{key:"get",value:function(e){return I.a.get(e)}},{key:"delete",value:function(e){return I.a.delete(e)}}]),e}();L.JSON_HEADER={headers:{"Content-Type":"application/json"}};var q,U=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getPersonById",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(Object(m.a)(n.prototype),"get",this).call(this,"/person_faculty_info/".concat(t));case 2:return r=e.sent,e.abrupt("return",S.toPerson(r.data[0]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPersonStatusById",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(Object(m.a)(n.prototype),"get",this).call(this,"/persons_status/".concat(t));case 2:return r=e.sent,a=r.data[0].person_status,e.abrupt("return",S.toCovidStatus(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPerson",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},!y(t.faculty_id)||""===t.faculty_id){e.next=6;break}return e.next=4,Object(v.a)(Object(m.a)(n.prototype),"post",this).call(this,"/faculties",S.toCreateFacultyRequest(t));case 4:a=e.sent,r=a.data[0];case 6:return e.next=8,Object(v.a)(Object(m.a)(n.prototype),"post",this).call(this,"persons",S.toPersonRequest(t));case 8:return c=e.sent,e.abrupt("return",Promise.resolve(S.toPerson(Object(p.a)(Object(p.a)({},c.data[0]),r))));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePerson",value:function(){var e=Object(j.a)(d.a.mark((function e(t,r){var a,c,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},g(r.faculty_id)){e.next=16;break}return e.next=4,Object(v.a)(Object(m.a)(n.prototype),"get",this).call(this,"/faculties/".concat(r.faculty_id));case 4:if(0!==e.sent.data.length){e.next=12;break}return e.next=8,Object(v.a)(Object(m.a)(n.prototype),"post",this).call(this,"/faculties",S.toCreateFacultyRequest(r));case 8:c=e.sent,a=c.data[0],e.next=16;break;case 12:return e.next=14,Object(v.a)(Object(m.a)(n.prototype),"patch",this).call(this,"/faculties/".concat(r.faculty_id),S.toUpdateFacultyRequest(r));case 14:i=e.sent,a=i.data[0];case 16:return e.next=18,Object(v.a)(Object(m.a)(n.prototype),"patch",this).call(this,"persons/".concat(t),S.toUpdatePersonRequest(r));case 18:return s=e.sent,e.abrupt("return",Promise.resolve(S.toPerson(Object(p.a)(Object(p.a)({},s.data[0]),a))));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(L)),W={in_app_notification:!0,person_status:r.NEGATIVE},V=Object(f.b)({name:"person",initialState:W,reducers:{setPerson:function(e,t){e.person_id=t.payload.person_id,e.name=t.payload.name,e.job_title=t.payload.job_title,e.faculty_id=t.payload.faculty_id,e.student_id=t.payload.student_id,e.in_app_notification=t.payload.in_app_notification,e.email=t.payload.email,e.phone_number=t.payload.phone_number,e.person_status=t.payload.person_status},setPersonStatus:function(e,t){e.person_status=t.payload}}}),F=V.actions,K=F.setPerson,Y=F.setPersonStatus,M=function(e){return e.person},z=V.reducer;!function(e){e.EMAIL="email",e.IN_APP="in app",e.TEXT="text"}(q||(q={}));var H=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"toNotificationModel",value:function(e){var t;switch(e.category){case"inApp":t=q.IN_APP;break;case"email":t=q.EMAIL;break;default:t=q.TEXT}var n={notification_time:A(e.notification_time),category:t};return Object(p.a)(Object(p.a)({},e),n)}}]),e}(),G=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getNotifications",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/person_notification_messages_info/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.map(H.toNotificationModel));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUnreadNotifications",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/inApp_notifications_unread/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"markNotificationAsRead",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.patch("/person_notifications/read/notification_id/".concat(n,"/person_id/").concat(t),{});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(L)),J=n(69),X=Object(f.b)({name:"login",initialState:{isLoggedIn:!1,isAppLoading:!0},reducers:{login:function(e){e.isLoggedIn=!0},appLoaded:function(e){e.isAppLoading=!1}}}),Q=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a,c,i,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=5e3;case 1:return t.next=4,N(r);case 4:return t.prev=4,t.next=7,Promise.all([U.getPersonStatusById(e),G.getUnreadNotifications(e)]);case 7:a=t.sent,c=Object(b.a)(a,2),i=c[0],s=c[1],n(Y(i)),s.length>0&&s.forEach((function(t){J.b.error(t.body,{onOpen:function(){return G.markNotificationAsRead(e,t.notification_id)},autoClose:!1})})),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),console.log(t.t0);case 18:t.next=1;break;case 20:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}()},$=X.actions,Z=$.login,ee=$.appLoaded,te=function(e){return e.login.isLoggedIn},ne=function(e){return e.login.isAppLoading},re=X.reducer,ae=n(279),ce=n(274),ie=n(295),se=n(291),oe=n(70),ue=n(272),le=n(34),de=n(22),be=n.n(de),je=/^\d+$/,fe=be.a.object({name:be.a.string().min(1).required(),email:be.a.string().email({tlds:{allow:!1}}).allow(""),phone_number:be.a.string().regex(je).allow(""),in_app_notification:be.a.boolean().required(),student_id:be.a.string().regex(je).allow(""),faculty_id:be.a.string().regex(je).allow(""),job_title:be.a.string().min(1).when("faculty_id",{is:be.a.string(),then:be.a.required(),otherwise:be.a.allow("")})}),pe=n(114),he=n.n(pe),Oe=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"getPersonId",value:function(){return he.a.get(e.IDENTITY_COOKIE_KEY)}},{key:"setPersonId",value:function(t){he.a.set(e.IDENTITY_COOKIE_KEY,t.toString(),{expires:new Date("2025-12-17T03:24:00")})}}]),e}();Oe.IDENTITY_COOKIE_KEY="me";var ve=n(269),me=Object(ve.a)((function(e){return{container:{marginTop:"13vh",display:"flex",flexDirection:"column",alignItems:"center"},elementsContainer:{display:"flex",flexDirection:"column"},form:{width:"100%"},submit:{margin:e.spacing(3,0,2),background:"black"}}})),xe=n(10),_e="/editPerson",ye="/home",ge="/bike",ke="/personInfo",we="/tests",Ce="/editTest",Ne="/createTest",Se="/notifications",Te="/scheduled_classes",Ie="/bubble_landing",Be="/create_bubble",Ee="/stats",Pe=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getAllBikes",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/bikes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(L)),Ae=Object(f.b)({name:"bike",initialState:{allBikes:[]},reducers:{setBikes:function(e,t){e.allBikes=t.payload}}}),De=function(e){return e.bike.allBikes},Re=function(){return function(e){Pe.getAllBikes().then((function(t){e(Ae.actions.setBikes(t.map((function(e){return e.shared_bike_id}))))}))}},Le=Ae.reducer,qe=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"toCovidTestInfos",value:function(e){return e.map((function(e){return{covid_test:{test_time:D(e.test_time),test_input_time:D(e.test_input_time),status:e.status},covid_testing_centre:{covid_testing_centre_id:e.covid_testing_centre_id,name:e.centre_name,building_number:e.building_number,street_number:e.street_number,postal_code:e.postal_code,city:e.city,province:e.province}}}))}},{key:"toCreateCovidTestPayload",value:function(e,t){var n={person_id:e.toString(),test_time:t.test_time.toISOString(),covid_testing_centre_id:t.covid_testing_centre.covid_testing_centre_id};return t.status!==r.UNKNOWN&&(n.status=t.status===r.POSITIVE),n}},{key:"toUpdateCovidTestPayload",value:function(e){return{status:e.status===r.POSITIVE}}}]),e}(),Ue=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getAllCovidTestingCentres",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/covid_testing_centres");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllCovidTestsForUser",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/covid_test_info/".concat(t));case 2:return n=e.sent,e.abrupt("return",qe.toCovidTestInfos(n.data));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createCovidTest",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qe.toCreateCovidTestPayload(t,n),e.next=3,this.post("/covid_tests",r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateCovidTest",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qe.toUpdateCovidTestPayload(n),c=n.covid_testing_centre.covid_testing_centre_id,e.next=4,this.patch("/covid_tests/person_id/".concat(t,"/test_centre_id/").concat(c,"/input_time/").concat(r),a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(L)),We=Object(f.b)({name:"covidTestingCentre",initialState:{allCovidTestingCentres:[]},reducers:{setCovidTestingCentres:function(e,t){e.allCovidTestingCentres=t.payload}}}),Ve=function(e){return e.covidTestingCentre.allCovidTestingCentres},Fe=function(){return function(e){Ue.getAllCovidTestingCentres().then((function(t){e(We.actions.setCovidTestingCentres(t))}))}},Ke=We.reducer;function Ye(){var e,t,n,r,i,s,o=Object(c.useState)(""),l=Object(b.a)(o,2),f=l[0],p=l[1],h=Object(u.c)(te),O=Object(u.b)(),v=Object(xe.k)(),m=Object(u.c)(M),x=me(),_=Object(le.useForm)({resolver:Object(oe.joiResolver)(fe),defaultValues:{name:null!==(e=m.name)&&void 0!==e?e:"",email:null!==(t=m.email)&&void 0!==t?t:"",phone_number:null!==(n=m.phone_number)&&void 0!==n?n:"",in_app_notification:m.in_app_notification,student_id:null!==(r=m.student_id)&&void 0!==r?r:"",faculty_id:null!==(i=m.faculty_id)&&void 0!==i?i:"",job_title:null!==(s=m.job_title)&&void 0!==s?s:""}}),y=_.register,k=_.handleSubmit,w=_.control,C=_.watch,N=_.errors,S=!g(C("faculty_id")),T=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,h){e.next=13;break}return e.next=4,U.createPerson(t);case 4:n=e.sent,Oe.setPersonId(n.person_id),O(K(n)),O(Re()),O(Fe()),O(Q(n.person_id)),O(Z()),e.next=18;break;case 13:return e.next=15,U.updatePerson(m.person_id,t);case 15:r=e.sent,O(K(r)),v.push(ke);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),p(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(ue.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(ce.a,{}),Object(a.jsxs)("div",{className:x.container,children:[Object(a.jsx)("h3",{children:h?"Edit Info":"Create an Account"}),Object(a.jsxs)("form",{className:x.form,noValidate:!0,onSubmit:k(T),children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:y,required:!0,fullWidth:!0,label:"name",name:"name",autoComplete:"name"}),N.name&&Object(a.jsx)("p",{children:"Name is required."}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:y,fullWidth:!0,label:"email (opt)",name:"email",autoComplete:"email"}),N.email&&Object(a.jsx)("p",{children:"Email was invalid."}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:y,fullWidth:!0,label:"phone number (opt)",name:"phone_number",autoComplete:"tel"}),N.phone_number&&Object(a.jsx)("p",{children:"Phone number format was invalid. Proper format: 123456789."}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:y,fullWidth:!0,label:"student number (opt)",name:"student_id"}),N.student_id&&Object(a.jsx)("p",{children:"Student number was invalid."}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:y,fullWidth:!0,label:"faculty number (opt)",name:"faculty_id"}),N.faculty_id&&Object(a.jsx)("p",{children:"Faculty number was invalid."}),S&&Object(a.jsxs)("div",{children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:y,fullWidth:!0,label:"job title (opt)",name:"job_title"}),N.job_title&&Object(a.jsx)("p",{children:"Job title must be filled if faculty number is."})]}),Object(a.jsx)(le.Controller,{name:"in_app_notification",control:w,render:function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(se.a,{className:"input",onChange:function(t){return e.onChange(t.target.checked)},checked:e.value}),Object(a.jsx)("label",{children:"In-App Notifications?"})]})}}),N.in_app_notification&&Object(a.jsx)("p",{children:N.in_app_notification.message}),Object(a.jsx)(ae.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:x.submit,children:h?"Update":"Sign Up"}),f&&Object(a.jsx)("p",{children:"Please ensure that you have at least one active notification setting."})]})]})]})}var Me=n(287),ze=n(288),He=(n(216),n(36));function Ge(){var e=Object(u.c)(te),t=Object(u.c)(M);return Object(a.jsxs)(Me.a,{bg:"light",expand:"lg",children:[Object(a.jsx)(Me.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(Me.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsx)(He.LinkContainer,{to:ye,children:Object(a.jsx)(Me.a.Brand,{className:"mr-auto",children:"TRACK"})}),e&&Object(a.jsxs)(ze.a,{className:"navbar-links",children:[Object(a.jsx)(He.LinkContainer,{to:Ie,children:Object(a.jsx)(ze.a.Link,{children:"Bubble"})}),Object(a.jsx)(He.LinkContainer,{to:we,children:Object(a.jsx)(ze.a.Link,{children:"Tests"})}),Object(a.jsx)(He.LinkContainer,{to:ge,children:Object(a.jsx)(ze.a.Link,{children:"Bike"})}),Object(a.jsx)(He.LinkContainer,{to:Te,children:Object(a.jsx)(ze.a.Link,{children:"Class"})}),Object(a.jsx)(He.LinkContainer,{to:Se,children:Object(a.jsx)(ze.a.Link,{children:"Notifications"})}),Object(a.jsx)(He.LinkContainer,{to:Ee,children:Object(a.jsx)(ze.a.Link,{children:"Stats"})})]}),e&&Object(a.jsx)(ze.a,{className:"ml-auto",children:Object(a.jsx)(He.LinkContainer,{to:ke,children:Object(a.jsx)(ae.a,{className:"personButton",variant:"outlined",children:t.name})})})]})]})}n(221);var Je=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getEntranceInfoById",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/entrance_info/".concat(t));case 2:if(0!==(n=e.sent).data.length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPersonEntrance",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/person_entrances",{person_id:t,entrance_id:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(L)),Xe=n(145);function Qe(e){var t=e.onDebounce,n=e.placeholder,r=e.debounceTime,c=void 0===r?300:r,i=e.label,s=void 0===i?"":i,o=e.style,u=void 0===o?{}:o,l=e.fullWidth,d=void 0!==l&&l,b=Object(Xe.a)(c,(function(e){t(e.target.value)}));return Object(a.jsx)(ie.a,{placeholder:n,label:s,style:u,fullWidth:d,onChange:b,variant:"outlined"})}var $e=n(280);n(222);function Ze(){var e,t,n=Object(u.c)(M),r=Object(c.useState)(void 0),i=Object(b.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)(!1),f=Object(b.a)(l,2),p=f[0],h=f[1],O=Object(c.useState)(""),v=Object(b.a)(O,2),m=v[0],x=v[1],_=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=5;break}x(""),o(void 0),e.next=16;break;case 5:if(Number.isNaN(Number.parseInt(t))){e.next=14;break}return e.next=8,Je.getEntranceInfoById(t);case 8:n=e.sent,o(n),h(!0),void 0===n&&(h(!1),x("The entrance id did not exist, please try again.")),e.next=16;break;case 14:h(!1),x("The entrance id did not exist, please try again.");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===s){e.next=13;break}return t=s,e.prev=2,e.next=5,Je.createPersonEntrance(n.person_id,t.entrance_id);case 5:J.b.info("Checked in successfully!"),x(""),h(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),J.b.error("There was an error while checking in, please try again");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();if(void 0===s)g(m)||(e=Object(a.jsx)($e.a,{style:{marginTop:"3vh"},children:m}));else{var k,w=s;k=g(w.room_number)?"Building Code: ".concat(w.building_code):"Room Type: ".concat(w.building_code," ").concat(w.room_number),e=Object(a.jsxs)("div",{className:"entrance-info-container-with-button",children:[Object(a.jsxs)("div",{className:"entrance-info-container",children:[Object(a.jsxs)($e.a,{style:{marginTop:"3vh"},children:["Building Name: ",w.name]}),Object(a.jsx)($e.a,{children:k}),w.room_type&&Object(a.jsxs)($e.a,{children:["Room Type: ",(t=w.room_type,C(t.replace("_"," ")))]}),Object(a.jsxs)($e.a,{children:["Entrance Number: ",w.entrance_id]})]}),p&&Object(a.jsx)(ae.a,{fullWidth:!0,style:{marginTop:"3vh"},onClick:y,size:"large",variant:"outlined",children:"Check-In"})]})}return Object(a.jsxs)(ue.a,{className:"entrance-input-container",children:[Object(a.jsx)(Qe,{label:"Check-In",placeholder:"Entrance Number",onDebounce:_}),e]})}var et=n(50),tt=n(51);function nt(){var e,t,n=Object(u.c)(M),c="You are: ";switch(n.person_status){case r.POSITIVE:e="Stay home ".concat(n.name,"!"),t="#ff0000";break;case r.INFECTED:e="Be careful ".concat(n.name,"!"),c="You had an exposure and are: ",t="#f8d354";break;default:e="Welcome ".concat(n.name,"!"),t="#07da63"}return Object(a.jsxs)(ue.a,{className:"hello",children:[Object(a.jsx)("h1",{className:"welcome-message",children:e}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)("h1",{style:{marginRight:"10px"},children:c}),Object(a.jsx)(et.a,{icon:tt.b,color:t,size:"2x"})]}),Object(a.jsx)(Ze,{})]})}var rt=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"toPersonBikes",value:function(t){return t.map(e.toPersonBike)}},{key:"toPersonBike",value:function(e){return{shared_bike_id:e.shared_bike_id,person_id:e.person_id,rental_time:A(e.rental_time)}}}]),e}(),at=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getBikeRentalsByPersonId",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/person_bikes/".concat(t));case 2:return n=e.sent,e.abrupt("return",rt.toPersonBikes(n.data));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPersonBike",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/person_bikes",{person_id:t,shared_bike_id:n});case 2:return r=e.sent,e.abrupt("return",rt.toPersonBike(r.data[0]));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(L));n(225);function ct(e){if(e.bikeHistories){var t=e.bikeHistories.map((function(e){var t=e.rental_time.toISOString(),n=k(e.rental_time),r="".concat(n,": Bike ").concat(e.shared_bike_id);return Object(a.jsx)($e.a,{children:r},t)}));return Object(a.jsxs)("div",{className:"bike-log-container",children:[Object(a.jsx)($e.a,{variant:"h5",children:"Rental Log"}),Object(a.jsx)("div",{className:"bike-log-text-container",children:t})]})}return Object(a.jsx)("div",{})}function it(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),s=Object(b.a)(i,2),o=s[0],l=s[1],f=Object(u.c)(De),p=Object(u.c)(M),h=me(),O=Object(le.useForm)({defaultValues:{shared_bike_id:""}}),v=O.register,m=O.handleSubmit,x=O.errors;Object(c.useEffect)((function(){at.getBikeRentalsByPersonId(p.person_id).then((function(e){r(e)}))}),[]);var _=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.includes(t.shared_bike_id)){e.next=4;break}l("The bike number does not exist"),e.next=17;break;case 4:return e.prev=4,e.next=7,at.createPersonBike(p.person_id,t.shared_bike_id);case 7:a=e.sent,(c=n.slice()).unshift(a),r(c),l(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),l("The bike is not available to rent.");case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(ue.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(ce.a,{}),Object(a.jsxs)("div",{className:h.container,children:[Object(a.jsx)("h3",{children:"Bikes"}),Object(a.jsxs)("form",{className:h.form,noValidate:!0,onSubmit:m(_),children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:v({minLength:1,required:!0}),required:!0,fullWidth:!0,label:"Bike number",name:"shared_bike_id"}),x.shared_bike_id&&Object(a.jsx)("p",{children:"Bike number is required."}),!g(o)&&!x.shared_bike_id&&Object(a.jsx)("p",{children:o}),Object(a.jsx)(ae.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:h.submit,children:"Check-In"})]})]}),Object(a.jsx)(ct,{bikeHistories:n})]})}var st=n(281),ot=n(282),ut=n(283),lt=Object(ve.a)((function(e){return{root:{width:"fit-content",padding:"1vh 1vw"},cardContainer:{display:"flex",alignItems:"center",flexDirection:"column",marginTop:"15vh"},titleContainer:{marginBottom:e.spacing(4),display:"flex",alignItems:"center",flexDirection:"column"},testingCentreName:{textAlign:"center"},center:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},body:{fontSize:14,marginBottom:e.spacing(1),whiteSpace:"pre-line"},editButton:{marginTop:e.spacing(3)}}}));function dt(){var e=lt(),t=Object(u.c)(M);return Object(a.jsx)(ue.a,{className:e.cardContainer,children:Object(a.jsx)(st.a,{className:e.root,children:Object(a.jsxs)(ot.a,{className:e.center,children:[Object(a.jsx)($e.a,{className:e.titleContainer,variant:"h5",children:t.name}),Object(a.jsxs)(ue.a,{children:[t.phone_number&&Object(a.jsxs)($e.a,{className:e.body,color:"textSecondary",children:["Number: ",t.phone_number]}),t.email&&Object(a.jsxs)($e.a,{className:e.body,color:"textSecondary",children:["Email: ",t.email]}),t.student_id&&Object(a.jsxs)($e.a,{className:e.body,color:"textSecondary",children:["Student Number: ",t.student_id]}),t.faculty_id&&Object(a.jsxs)($e.a,{className:e.body,color:"textSecondary",children:["Faculty Number: ",t.faculty_id]}),t.job_title&&Object(a.jsxs)($e.a,{className:e.body,color:"textSecondary",children:["Job Title: ",t.job_title]}),Object(a.jsxs)($e.a,{className:e.body,color:"textSecondary",children:["Notification: ",t.in_app_notification?"On":"Off"]})]}),Object(a.jsx)(ut.a,{children:Object(a.jsx)(He.LinkContainer,{to:_e,children:Object(a.jsx)(ae.a,{size:"large",className:e.editButton,variant:"outlined",children:"Edit"})})})]})})})}n(226);var bt={covid_test:void 0},jt=Object(f.b)({name:"covidTest",initialState:bt,reducers:{setCovidTestToEdit:function(e,t){e.covid_test=t.payload}}}),ft=jt.actions.setCovidTestToEdit,pt=function(e){return e.covidTest.covid_test},ht=jt.reducer;function Ot(e){var t,n=lt(),r=Object(xe.k)(),c=Object(u.b)(),i=e.covidTestInfo.covid_test,s=e.covidTestInfo.covid_testing_centre;t=y(i.status)?i.status?"#ff0000":"#07da63":"#d3d3d3";return Object(a.jsx)(ue.a,{className:"covid-test-card-container",children:Object(a.jsx)(st.a,{className:n.root,children:Object(a.jsxs)(ot.a,{className:n.center,children:[Object(a.jsx)(et.a,{icon:tt.b,color:t,size:"2x"}),Object(a.jsxs)(ue.a,{className:n.titleContainer,children:[Object(a.jsx)($e.a,{variant:"h5",children:"Covid-Test"}),Object(a.jsx)($e.a,{className:"".concat(n.body," ").concat(n.testingCentreName),color:"textSecondary",children:s.name})]}),Object(a.jsxs)(ue.a,{children:[Object(a.jsxs)($e.a,{className:n.body,color:"textSecondary",children:["Test Date: ",k(E()(i.test_time))]}),Object(a.jsxs)($e.a,{className:n.body,color:"textSecondary",children:["Centre Id: ",s.covid_testing_centre_id]}),Object(a.jsxs)($e.a,{className:n.body,color:"textSecondary",children:["Address: ",w(s)]})]}),Object(a.jsx)(ut.a,{children:Object(a.jsx)(ae.a,{onClick:function(){c(ft(e.covidTestInfo)),r.push(Ce)},size:"large",className:n.editButton,variant:"outlined",children:"Update"})})]})})})}n(227);function vt(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!0),s=Object(b.a)(i,2),o=s[0],l=s[1],d=Object(u.c)(M);Object(c.useEffect)((function(){Ue.getAllCovidTestsForUser(d.person_id).then((function(e){l(!1),r(e)}))}),[]),n.sort((function(e,t){return E()(t.covid_test.test_time).isAfter(e.covid_test.test_time)?1:-1}));var j=n.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(Ot,{covidTestInfo:e})},t)}));return o?Object(a.jsx)("div",{}):Object(a.jsxs)("div",{className:"covid-test-landing-page",children:[j,Object(a.jsx)(He.LinkContainer,{style:{cursor:"pointer"},to:Ne,children:Object(a.jsx)(et.a,{icon:tt.c,size:"2x"})})]})}var mt=n(148),xt=n(289),_t=n(277),yt=n(297),gt=n(290),kt=n(299),wt=(n(228),n(30)),Ct=n(286),Nt=n(147),St=be.a.object({covid_testing_centre:be.a.object().unknown(!0).required(),test_time:be.a.date().required(),status:be.a.string().required()}),Tt=be.a.object({covid_testing_centre:be.a.object().unknown(!0).required(),test_time:be.a.date().required(),status:be.a.string().valid(r.POSITIVE,r.NEGATIVE).required()});function It(e){var t,n,c=Object(u.c)(pt),s=e.forCreation,o=Object(u.c)(M),l=Object(xe.k)(),b=Object(u.c)(Ve),f={covid_testing_centre:b[0],test_time:new Date,status:r.UNKNOWN};e.forCreation||(f.covid_testing_centre=null!==(t=b.find((function(e){return e.covid_testing_centre_id===(null===c||void 0===c?void 0:c.covid_testing_centre.covid_testing_centre_id)})))&&void 0!==t?t:f.covid_testing_centre,f.test_time=c?new Date(c.covid_test.test_time):f.test_time,f.status=y(n=null===c||void 0===c?void 0:c.covid_test.status)?n?r.POSITIVE:r.NEGATIVE:r.UNKNOWN);var h=Object(le.useForm)({resolver:s?Object(oe.joiResolver)(St):Object(oe.joiResolver)(Tt),defaultValues:f}),O=h.handleSubmit,v=h.control,m=h.errors;console.log(m);var x=me(),_=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=5;break}return e.next=3,Ue.createCovidTest(o.person_id,t);case 3:e.next=7;break;case 5:return e.next=7,Ue.updateCovidTest(o.person_id,t,null===c||void 0===c?void 0:c.covid_test.test_input_time);case 7:l.push(we);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(ue.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(ce.a,{}),Object(a.jsx)("div",{className:x.container,children:Object(a.jsx)("form",{className:x.form,noValidate:!0,onSubmit:O(_),children:Object(a.jsxs)(ue.a,{className:x.elementsContainer,children:[Object(a.jsx)(le.Controller,{name:"covid_testing_centre",defaultValue:f.covid_testing_centre,control:v,render:function(e){var t=e.onChange,n=Object(mt.a)(e,["onChange"]);return Object(a.jsx)(xt.a,Object(p.a)({options:b,defaultValue:f.covid_testing_centre,disabled:!s,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(n)},renderOption:function(e){return Object(a.jsx)(i.a.Fragment,{children:e.name})},renderInput:function(e){return Object(a.jsx)(ie.a,Object(p.a)(Object(p.a)({},e),{},{label:"Covid Testing Centre",variant:"outlined"}))}},n))}}),m.test_time&&Object(a.jsx)("p",{children:"Test time is required"}),Object(a.jsx)(le.Controller,{control:v,name:"test_time",defaultValue:f.test_time,render:function(e){return Object(a.jsx)(wt.a,{utils:Nt.a,children:Object(a.jsx)(Ct.a,{disableToolbar:!0,disabled:!s,variant:"inline",format:"MM/dd/yyyy",margin:"normal",label:"Covid Test Date",value:e.value,onChange:function(t){return e.onChange(t)},KeyboardButtonProps:{"aria-label":"change date"}})})}}),m.test_time&&Object(a.jsx)("p",{children:"Test time is required"}),Object(a.jsx)(le.Controller,{render:function(e){return Object(a.jsxs)(_t.a,{children:[Object(a.jsx)(yt.a,{id:"test-status",children:"Test Result"}),Object(a.jsxs)(gt.a,{labelId:"test-status",value:e.value,onChange:function(t){return e.onChange(t.target.value)},children:[Object(a.jsx)(kt.a,{value:r.POSITIVE,children:"Positive"}),Object(a.jsx)(kt.a,{value:r.NEGATIVE,children:"Negative"}),Object(a.jsx)(kt.a,{value:r.UNKNOWN,children:"Unknown"})]})]})},name:"status",defaultValue:f.status,control:v}),m.status&&Object(a.jsx)("p",{children:"When updating your test result, the updated status must be positive or negative."}),Object(a.jsx)(ae.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary",className:x.submit,children:e.forCreation?"Create":"Update"})]})})})]})}n(229);var Bt=n(89),Et=n(294),Pt=n(284),At=n(285),Dt=Object(ve.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},root:{width:"35vw"},headingGray:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},notificationBody:{display:"flex",flexDirection:"column"},actionContainer:{display:"flex",marginLeft:"auto"}}}));function Rt(e){var t=e.notificationModels,n="Sent on: ".concat(k(t[0].notification_time)),r="Sent through: ".concat(t.map((function(e){return e.category})).join(", ")),c="Message: ".concat(t[0].body),i=Dt();return Object(a.jsxs)(Et.a,{className:i.root,children:[Object(a.jsx)(Pt.a,{expandIcon:Object(a.jsx)(et.a,{icon:tt.a,color:"black",size:"sm"}),children:Object(a.jsx)($e.a,{className:i.heading,children:n})}),Object(a.jsx)(At.a,{children:Object(a.jsxs)(ue.a,{className:i.notificationBody,children:[Object(a.jsx)($e.a,{style:{marginBottom:"2vh",whiteSpace:"pre-line"},children:c}),Object(a.jsx)($e.a,{color:"textSecondary",children:r})]})})]})}n(230);function Lt(){var e=Object(c.useState)({}),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!0),s=Object(b.a)(i,2),o=s[0],l=s[1],d=Object(u.c)(M);if(Object(c.useEffect)((function(){G.getNotifications(d.person_id).then((function(e){l(!1);var t=Object(Bt.groupBy)(e,(function(e){return e.notification_time.toISOString()}));r(t)}))}),[]),o)return Object(a.jsx)("div",{});if(0===Object.keys(n).length)return Object(a.jsx)("div",{className:"notifications_page",children:Object(a.jsx)("h1",{children:"You have no notifications"})});var j=Object.keys(n).sort((function(e,t){var r=n[e],a=n[t];return r[0].notification_time.isAfter(a[0].notification_time)?-1:1})).map((function(e,t){return Object(a.jsx)(Rt,{notificationModels:n[e]},t)}));return Object(a.jsxs)("div",{className:"notifications_page",children:[Object(a.jsx)("h2",{children:"Notifications"}),j]})}var qt=function(){function e(){Object(h.a)(this,e)}return Object(O.a)(e,null,[{key:"toClassDays",value:function(t){return t.map(e.toClassDay)}},{key:"toClassDay",value:function(t){var n={start_day:A(t.start_day),end_day:A(t.end_day),day_of_week:{day_name:e.DAY_CONVERSION_MAP.get(t.day_of_week),day_number:t.day_of_week}};return Object(p.a)(Object(p.a)({},t),n)}}]),e}();qt.DAY_CONVERSION_MAP=new Map([[0,"Sunday"],[1,"Monday"],[2,"Tuesday"],[3,"Wednesday"],[4,"Thursday"],[5,"Friday"],[6,"Sunday"]]);var Ut=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getScheduledClassesByQueryString",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/scheduled_class_info/".concat(encodeURI(t)));case 2:return n=e.sent,e.abrupt("return",qt.toClassDays(n.data));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScheduledClassesByPersonId",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/scheduled_class_info/person_id/".concat(t));case 2:return n=e.sent,e.abrupt("return",qt.toClassDays(n.data));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPersonScheduledClass",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/person_scheduled_classes",{person_id:t,scheduled_class_id:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deletePersonScheduledClass",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/person_scheduled_classes/".concat(t,"/").concat(encodeURI(n)));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(L));n(231);function Wt(e){var t=e.onActionClick,n=e.id,r=e.actionButtonLabel,c=e.children,i=e.heading,s=e.secondaryHeading,o=Dt();return Object(a.jsxs)(Et.a,{className:o.root,children:[Object(a.jsxs)(Pt.a,{className:o.actionContainer,expandIcon:Object(a.jsx)(et.a,{icon:tt.a,color:"black",size:"sm"}),children:[Object(a.jsx)($e.a,{className:o.heading,children:i}),s&&Object(a.jsx)($e.a,{className:o.secondaryHeading,children:s}),Object(a.jsx)("div",{className:o.actionContainer,children:Object(a.jsx)(ae.a,{onClick:function(e){e.stopPropagation(),t(n)},children:r})})]}),Object(a.jsx)(At.a,{children:Object(a.jsx)(ue.a,{className:o.notificationBody,children:c})})]})}n(232);var Vt=Object(ve.a)((function(e){return{dayContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginBottom:"2vh"}}}));function Ft(e){var t=e.classDays,n=Vt(),r=k(t[0].start_day),c=k(t[0].end_day);t.sort((function(e,t){return e.day_of_week.day_number-t.day_of_week.day_number}));var i=t.map((function(e){return Object(a.jsxs)("div",{className:n.dayContainer,children:[Object(a.jsxs)($e.a,{color:"textSecondary",children:["Day: ","".concat(C(e.day_of_week.day_name))]}),Object(a.jsxs)($e.a,{color:"textSecondary",children:["Room: ","".concat(e.building_code," ").concat(e.room_number)]})]},e.day_of_week.day_number)}));return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)($e.a,{children:"".concat(t[0].class_name," (").concat(r," - ").concat(c,")")}),i]})}function Kt(){var e=Object(c.useState)({}),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)({}),s=Object(b.a)(i,2),o=s[0],l=s[1],f=Object(c.useState)(""),p=Object(b.a)(f,2),h=p[0],O=p[1],v=Object(c.useState)(!0),m=Object(b.a)(v,2),x=m[0],_=m[1],y=Object(c.useState)(!1),g=Object(b.a)(y,2),k=g[0],w=g[1],C=Object(u.c)(M),N=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ut.getScheduledClassesByPersonId(C.person_id).then((function(e){var t=Object(Bt.groupBy)(e,"scheduled_class_id");return r(t),t})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){N().then((function(){_(!1)}))}),[]);var S=function(e,t){var n=e.filter((function(e){return!t.hasOwnProperty(e.scheduled_class_id)}));l(Object(Bt.groupBy)(n,"scheduled_class_id"))},T=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:n,O(t),!(t.length>0)){e.next=11;break}return w(!0),e.next=6,Ut.getScheduledClassesByQueryString(t);case 6:a=e.sent,w(!1),S(a,r),e.next=12;break;case 11:l({});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(C.person_id,n);case 2:return e.next=4,N();case 4:return r=e.sent,e.next=7,T(h,r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(Ut.createPersonScheduledClass.bind(Ut),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(Ut.deletePersonScheduledClass.bind(Ut),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(x)return Object(a.jsx)("div",{});var P,A,D=function(e,t,n,r,c){var i=e[t];return Object(a.jsx)(Wt,{heading:i[0].scheduled_class_id,id:i[0].scheduled_class_id,secondaryHeading:i[0].activity,onActionClick:c,actionButtonLabel:r,children:Object(a.jsx)(Ft,{classDays:i})},n)};return P=0===Object.keys(n).length?Object(a.jsx)($e.a,{children:"You are currently not enrolled in any classes"}):Object.keys(n).map((function(e,t){return D(n,e,t,"Remove",E)})),P=Object(a.jsxs)("div",{className:"enrolled-class-container",children:[Object(a.jsx)("h3",{children:"Enrolled Classes"}),P]}),0===Object.keys(o).length?""===h||k||(A=Object(a.jsx)($e.a,{children:"No classes were found by the search term."})):A=Object.keys(o).map((function(e,t){return D(o,e,t,"Add",B)})),Object(a.jsxs)("div",{className:"scheduled-class-container",children:[P,Object(a.jsxs)("div",{className:"search-class-container",children:[Object(a.jsx)("h3",{children:"Enroll in Classes"}),Object(a.jsx)(Qe,{style:{marginBottom:"2vh"},fullWidth:!0,label:"Search",placeholder:"Search for classes by course id",onDebounce:T}),A]})]})}var Yt=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getBubbleInfosBySearchTerm",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/bubble_count_by_term/".concat(encodeURI(t)));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPeopleInBubbleBySearchTerm",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/persons_in_all_bubbles_by_term/".concat(encodeURI(t)));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBubbleInfosByPersonId",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/bubble_count_by_id/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createPersonBubble",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/person_bubbles",{person_id:t,bubble_id:n});case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deletePersonBubble",value:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/person_bubbles/person_id/".concat(t,"/bubble_id/").concat(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createBubble",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/bubbles",t);case 2:return n=e.sent,e.abrupt("return",n.data[0]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBubbleById",value:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("/bubbles/".concat(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(L));function Mt(e){var t=e.bubble,n=e.canDelete,r=e.onDelete;return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)($e.a,{style:{marginBottom:"2vh"},children:t.description}),Object(a.jsxs)($e.a,{color:"textSecondary",children:["Bubble Id: ",t.bubble_id]}),Object(a.jsxs)($e.a,{color:"textSecondary",children:["Person Count: ",t.count]}),n&&Object(a.jsx)(ae.a,{size:"small",style:{marginTop:"2vh"},onClick:function(){return r(t)},children:"Delete Bubble"})]})}function zt(){var e=Object(c.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),s=Object(b.a)(i,2),o=s[0],l=s[1],f=Object(c.useState)(""),p=Object(b.a)(f,2),h=p[0],O=p[1],v=Object(c.useState)(""),m=Object(b.a)(v,2),x=m[0],_=m[1],y=Object(c.useState)(!0),g=Object(b.a)(y,2),k=g[0],w=g[1],C=Object(c.useState)(!1),N=Object(b.a)(C,2),S=N[0],T=N[1],I=Object(u.c)(M),B=Object(xe.k)(),E=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yt.getBubbleInfosByPersonId(I.person_id).then((function(e){return r(e),e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){E().then((function(){w(!1)}))}),[]);var P=function(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.bubble_id===e.bubble_id}))}));l(n)},A=function(e,t){if(e.length>0)if(0===t.length)O("There is no person that is a member of all the searched bubbles");else if(1===t.length)O("".concat(t[0].name," is a member of all of the searched bubbles"));else{var n=t.pop();O("".concat(t.map((function(e){return e.name})).join(", ")," and ").concat(n.name," are members of all the searched bubbles"))}else O("")},D=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a,c,i,s,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:n,_(t),!(t.length>0)){e.next=15;break}return T(!0),e.next=6,Promise.all([Yt.getBubbleInfosBySearchTerm(t),Yt.getAllPeopleInBubbleBySearchTerm(t)]);case 6:a=e.sent,c=Object(b.a)(a,2),i=c[0],s=c[1],A(i,s),T(!1),P(i,r),e.next=16;break;case 15:l([]);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return t=e.sent,e.next=5,D(x,t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(I.person_id,n);case 2:return e.next=4,R();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(Yt.createPersonBubble.bind(Yt),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(Yt.deletePersonBubble.bind(Yt),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.deleteBubbleById(t.bubble_id);case 2:return e.next=4,R();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(k)return Object(a.jsx)("div",{});var V,F,K=function(e,t,n,r){return Object(a.jsx)(Wt,{heading:e.title,id:e.bubble_id,onActionClick:r,actionButtonLabel:t,children:Object(a.jsx)(Mt,{bubble:e,canDelete:n,onDelete:W})},e.bubble_id)};return V=0===n.length?Object(a.jsx)($e.a,{children:"You are not in any bubbles."}):n.map((function(e){return K(e,"Remove",!0,U)})),V=Object(a.jsxs)("div",{className:"enrolled-class-container",children:[Object(a.jsx)("h3",{children:"Your Bubbles"}),Object(a.jsx)(ae.a,{variant:"outlined",style:{marginBottom:"2vh"},onClick:function(){return B.push(Be)},children:"Create a bubble"}),V]}),0===o.length?""===x||S||(F=Object(a.jsx)($e.a,{children:"No bubbles were found by the search term."})):F=Object(a.jsxs)("div",{children:[Object(a.jsx)($e.a,{children:h}),o.map((function(e){return K(e,"Add",!1,q)}))]}),Object(a.jsxs)("div",{className:"scheduled-class-container",children:[V,Object(a.jsxs)("div",{className:"search-class-container",children:[Object(a.jsx)("h3",{children:"Join Bubbles"}),Object(a.jsx)(Qe,{style:{marginBottom:"2vh"},fullWidth:!0,label:"Search",placeholder:"Search for bubbles",onDebounce:D}),F]})]})}var Ht=be.a.object({title:be.a.string().required(),description:be.a.string().required()});function Gt(){var e=Object(u.c)(M),t=me(),n=Object(le.useForm)({resolver:Object(oe.joiResolver)(Ht)}),r=n.register,c=n.handleSubmit,i=n.errors,s=Object(xe.k)(),o=function(){var t=Object(j.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yt.createBubble(n);case 2:return r=t.sent,t.next=5,Yt.createPersonBubble(e.person_id,r.bubble_id);case 5:s.push(Ie);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)(ue.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(ce.a,{}),Object(a.jsxs)("div",{className:t.container,children:[Object(a.jsx)("h3",{children:"Create a Bubble"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:c(o),children:[Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:r,required:!0,autoComplete:"off",fullWidth:!0,label:"Title",name:"title"}),i.title&&Object(a.jsx)("p",{children:"Title is required."}),Object(a.jsx)(ie.a,{variant:"outlined",margin:"normal",inputRef:r,fullWidth:!0,required:!0,label:"Description",name:"description"}),i.description&&Object(a.jsx)("p",{children:"Description is required."}),Object(a.jsx)(ae.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Create Bubble"})]})]})]})}var Jt=new(function(e){Object(x.a)(n,e);var t=Object(_.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"getLargestScheduledClasses",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/largest_scheduled_class");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMostFrequentlyVisitedBuildings",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/frequently_used_buildings");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(L));function Xt(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),s=Object(b.a)(i,2),o=s[0],u=s[1],l=function(e){var t,n,r=(t=e.count,n="time",t>1?"".concat(n,"s"):n);return"".concat(e.building_code," (").concat(e.count," ").concat(r,")")},d=function(e){var t=1===e.count?"person":"people";return"".concat(e.scheduled_class_id," (").concat(e.count," ").concat(t,")")},j=function(e,t,n,r,a){if(e.length>0)if(1===e.length)t("".concat(n(e[0])," ").concat(r));else{var c=e.map((function(e){return n(e)})),i=c.pop();t("".concat(c.join(", ")," and ").concat(i," ").concat(a))}};return Object(c.useEffect)((function(){Promise.all([Jt.getMostFrequentlyVisitedBuildings(),Jt.getLargestScheduledClasses()]).then((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];!function(e){j(e,r,l,"is the most frequently visited building.","are the most frequently visited buildings.")}(n),function(e){j(e,u,d,"has the most enrolled users.","have the enrolled users.")}(a)}))}),[]),g(n)&&g(o)?Object(a.jsx)("div",{}):Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"15vh"},children:[Object(a.jsx)("h1",{style:{marginBottom:"20px"},children:"Stats"}),Object(a.jsx)("h5",{style:{margin:"20px",textAlign:"left"},children:n}),Object(a.jsx)("h5",{style:{margin:"20px",textAlign:"left"},children:o})]})}function Qt(){var e=Object(u.c)(te),t=Object(u.c)(ne),n=Object(u.b)();return Object(c.useEffect)((function(){var e=Oe.getPersonId();n(e?function(e){return function(t){U.getPersonById(e).then((function(n){t(K(n)),t(Q(e)),t(Z()),t(ee())}))}}(e):ee()),n(Re()),n(Fe())}),[]),Object(a.jsxs)("div",{children:[Object(a.jsx)(Ge,{}),Object(a.jsx)(J.a,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),!t&&!e&&Object(a.jsx)(Ye,{}),!t&&e&&Object(a.jsxs)(xe.g,{children:[Object(a.jsx)(xe.d,{exact:!0,path:"/",component:nt}),Object(a.jsx)(xe.d,{path:ye,component:nt}),Object(a.jsx)(xe.d,{path:_e,component:Ye}),Object(a.jsx)(xe.d,{path:ge,component:it}),Object(a.jsx)(xe.d,{path:ke,component:dt}),Object(a.jsx)(xe.d,{path:we,component:vt}),Object(a.jsx)(xe.d,{path:Se,component:Lt}),Object(a.jsx)(xe.d,{path:Te,component:Kt}),Object(a.jsx)(xe.d,{path:Ie,component:zt}),Object(a.jsx)(xe.d,{path:Be,component:Gt}),Object(a.jsx)(xe.d,{path:Ee,component:Xt}),Object(a.jsx)(xe.d,{path:Ne,render:function(){return Object(a.jsx)(It,{forCreation:!0})}}),Object(a.jsx)(xe.d,{path:Ce,render:function(){return Object(a.jsx)(It,{forCreation:!1})}}),Object(a.jsx)(xe.c,{to:ye})]})]})}var $t=Object(f.a)({reducer:{login:re,person:z,bike:Le,covidTestingCentre:Ke,covidTest:ht}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Zt=n(76);o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Zt.BrowserRouter,{children:Object(a.jsx)(u.a,{store:$t,children:Object(a.jsx)(Qt,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[233,1,2]]]);
//# sourceMappingURL=main.4f16d366.chunk.js.map